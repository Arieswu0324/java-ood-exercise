## å®ç°æ³¨æ„åˆ°çš„é—®é¢˜

### 1. hashCode, equals
é‡å†™ (override) ç±»çš„ `hashCode()` å’Œ `equals()` æ–¹æ³•æ˜¯å¤„ç†å¯¹è±¡ç›¸ç­‰æ€§ï¼ˆEqualityï¼‰çš„åŸºçŸ³ã€‚

ç±»é»˜è®¤ç»§æ‰¿ `Object` çš„è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œæ¯”è¾ƒçš„æ˜¯ç±»å¯¹è±¡çš„åœ°å€å€¼ã€‚å½“éœ€è¦å¯¹äºå¯¹è±¡çš„å†…å®¹åˆ¤æ–­å¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œä¸”å¯¹è±¡ä½œä¸º `Map` ä¸­çš„ `key` æ—¶ï¼Œè¦é‡å†™ç±»ä¸­çš„è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚
- `hashCode()` çš„é‡å†™æ–¹æ³•ï¼šJDK7ä¹‹åæœ‰æ¯”è¾ƒæ–¹ä¾¿çš„è°ƒç”¨ï¼š `Objects.hash(var1, var2...)`ï¼Œè¿™é‡Œçš„ `var` åº”è¯¥æ˜¯ä¸å¯å˜é‡ï¼Œä¾‹å¦‚ `final` ç±»å‹çš„ã€‚
- `equals()` çš„é‡å†™æ–¹æ³•ï¼šå› ä¸ºå½“ä¸¤ä¸ªå¯¹è±¡ `equals` æ—¶ï¼Œå®ƒä»¬çš„ `hashCode` å¿…ç„¶ç›¸ç­‰ï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªæ–¹æ³•æ¯”è¾ƒçš„æˆå‘˜å˜é‡åº”è¯¥æ˜¯ä¸€æ ·çš„ã€‚
```java
    @Override
    //Userç±»
    public boolean equals(Object obj) {
        if (this == obj) {//è‡ªåæ€§
            return true;
        }

        if (obj == null || getClass() != obj.getClass()) {//å¤„ç†NULLå’Œç±»å‹
            return false;
        }

        User other = (User) obj; //ç±»å‹è½¬æ¢

        //æ¯”è¾ƒæˆå‘˜å˜é‡
        if (!Objects.equals(other.name, name)) { 
            return false;
        }

        if (!Objects.equals(other.email, email)) {
            return false;
        }

        return score.get() == other.score.get();
    }
```
åœ¨Springå·¥ç¨‹é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå°‘æ‰‹åŠ¨é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå› ä¸ºåŸºæœ¬éƒ½æ˜¯Lombokæ¡†æ¶è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å½“ä½ å°† `@Data` æ³¨è§£åº”ç”¨åˆ°ä¸€ä¸ªç±»ä¸Šæ—¶ï¼ŒLombok ä¼šè‡ªåŠ¨ï¼š
æ ¹æ®æ‰€æœ‰ éé™æ€ï¼ˆnon-staticï¼‰ å’Œ éç¬æ€ï¼ˆnon-transientï¼‰ çš„å­—æ®µæ¥ç”Ÿæˆ `hashCode()` å’Œ `equals()` æ–¹æ³•ã€‚
`@Data` æ³¨è§£åŒ…æ‹¬ï¼š
`@ToString`
`@EqualsAndHashCode`
`@Getter`
`@Setter`
`@RequiredArgsConstructor`

### 2. å·¥å‚æ¨¡å¼çš„æ€è€ƒ
åˆ†åŒ…æ—¶å‘ç°ï¼ŒæŠ½è±¡å·¥å‚ç±»ä¸­çš„ `create` æ–¹æ³•æ˜¯ `protected`ï¼Œå…·ä½“çš„å·¥å‚ç±»å®ç°è¿™ä¸ªæ–¹æ³•ä¹‹åï¼Œä¹Ÿä¸èƒ½è¢«å¤–éƒ¨ç›´æ¥è°ƒç”¨ã€‚
å®é™…ä¸Šï¼Œç»å…¸çš„å·¥å‚æ¨¡å¼å°±æ˜¯è¿™æ ·çš„ï¼Œ`create` æ–¹æ³•åªè´Ÿè´£åˆ›å»ºå¯¹è±¡ï¼Œä¸å¸Œæœ›è¢«å¤–éƒ¨å•ç‹¬è°ƒç”¨ï¼Œä¸ºäº†æ›´å¥½çš„å°è£…ï¼Œå®ƒå¸¸å¸¸è¢«åŒ…è£…åœ¨å·¥å‚çš„ `public` æ–¹æ³•ä¸­ã€‚
```java
public abstract class VehicleFactory {

    //å®é™…æš´éœ²çš„æ–¹æ³•ï¼Œå°è£…å¥½æ•´ä¸ªæµç¨‹
    public Vehicle createVehicle(String plate) {
        System.out.println("some preparation steps");
        Vehicle vehicle = create(plate);
        System.out.println(vehicle.getPlate() + "vehicle created");
        return vehicle;
    }

    //å•ç‹¬åˆ›å»ºçš„æ–¹æ³•ä¸æš´éœ²ï¼Œéš”ç¦»é˜²æ­¢å®ƒè¢«å•ç‹¬è°ƒç”¨
    protected abstract Vehicle create(String plate);
}

```

### 3. åˆ†åŒ…
å¥½çš„å¼€å‘ä¹ æƒ¯ç»™ç±»åˆ† `package`ï¼Œä¹Ÿä¼šåŠæ—¶å‘ç°è®¿é—®æƒé™é—®é¢˜ï¼ŒSpring é¡¹ç›®çš„åˆ†åŒ…è¿˜å…³ç³»åˆ°Spring çš„è‡ªåŠ¨æ‰«æã€‚
`protected`, `private`, `public` (Access Modifiers)
- `private`: ç±»ç§æœ‰ï¼Œæˆå‘˜å˜é‡æ°¸è¿œæ˜¯ `private`ï¼Œå¸¸é‡æ˜¯ `public static final`
- `default`: åŒä¸€ä¸ªåŒ…
- `protected`: åŒä¸€ `package` æˆ–å­ç±»ã€‚æ³¨æ„è¿™é‡Œå—åˆ†åŒ…å½±å“ï¼Œç»§æ‰¿ä¸“ç”¨ä¿®é¥°ç¬¦
- `public`: å…¨å±€-æ¥å£ä¸­é»˜è®¤ï¼Œä¿æŒä»£ç æ•´æ´å¯ä»¥ä¸å†™


### 4. æšä¸¾ç±»
æšä¸¾ç±»æ˜¯Javaä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œç”¨æ¥å®šä¹‰ä¸€ç»„å¸¸é‡ã€‚å®ƒçš„æœºåˆ¶ä½¿ä¼ ç»Ÿçš„ `public static final` å¸¸é‡æ›´å¼ºå¤§ï¼Œä¹Ÿæ˜¯è§£è€¦äº†ã€‚
`enum` å¯ä»¥æœ‰æˆå‘˜å˜é‡ï¼Œæˆå‘˜æ–¹æ³•ã€‚
```java
public enum ErrorCode {
    // 1. æšä¸¾å¸¸é‡åˆ—è¡¨å’Œæ„é€ å‡½æ•°è°ƒç”¨
    SUCCESS(200, "æ“ä½œæˆåŠŸ"),
    BAD_REQUEST(400, "å‚æ•°é”™è¯¯"),
    INTERNAL_ERROR(500, "ç³»ç»Ÿå†…éƒ¨é”™è¯¯"); // å¿…é¡»æœ‰åˆ†å·ï¼Œå› ä¸ºåé¢æœ‰å…¶ä»–æˆå‘˜

    // 2. ç§æœ‰æˆå‘˜å˜é‡
    private final int code;
    private final String description;

    // 3. ç§æœ‰æ„é€ å‡½æ•°
    // æ³¨æ„ï¼šæšä¸¾çš„æ„é€ å‡½æ•°é»˜è®¤æ˜¯ private çš„ï¼Œä¹Ÿå¯ä»¥æ˜¾å¼å£°æ˜ä¸º private
    private ErrorCode(int code, String description) {
        this.code = code;
        this.description = description;
    }

    // 4. Getter æ–¹æ³•
    public int getCode() {
        return code;
    }

    public String getDescription() {
        return description;
    }
}
```
æœ€ä½³å®è·µï¼šéµå¾ª Java çº¦å®šï¼Œæšä¸¾å¸¸é‡å…¨éƒ¨ä½¿ç”¨å¤§å†™å­—æ¯ï¼Œå•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼ˆä¾‹å¦‚ï¼š`BAD_REQUEST`ï¼‰
æ¯”è¾ƒï¼š æ¨èä½¿ç”¨ `==` æ¥æ¯”è¾ƒä¸¤ä¸ªæšä¸¾å®ä¾‹ï¼Œå› ä¸ºå®ƒæ¯” `equals()` æ›´å¿«ã€æ›´å®‰å…¨ã€‚æšä¸¾å®ä¾‹åœ¨ JVM ä¸­æ˜¯å”¯ä¸€çš„ã€‚

ğŸ“¢æ³¨æ„ï¼šæ‰€æœ‰ Java æšä¸¾éƒ½ç»§æ‰¿è‡ª `java.lang.Enum` ç±»ã€‚
`enum` ä¸èƒ½ä½œä¸ºåŒ…åï¼ŒJava è¯­è¨€è§„èŒƒï¼Œå…³é”®å­—æ˜¯ä¿ç•™å­—ï¼Œä¸èƒ½ç”¨ä½œä»»ä½•æ ‡è¯†ç¬¦ï¼ˆIdentifierï¼‰


### 6. Javaæ³›å‹çš„ä½¿ç”¨
- æ³›å‹ç±» `class IndexSearch<T>`ï¼Œåš `T` çš„åŒ…è£…å®¹å™¨
- æ³›å‹æ¥å£ `public interface Generator<T>` 
- æ³›å‹æ–¹æ³• `public static <E> E getFirstElement(E[] array)`ï¼Œæ³›å‹å¿…é¡»æ”¾åœ¨è¿”å›å€¼ç±»å‹ï¼ˆ`void` æˆ–å…·ä½“ç±»å‹ï¼‰çš„å‰é¢

**é—®é¢˜**ï¼šæ³›å‹æ“¦é™¤(Type Erase) åœ¨ç¼–è¯‘æ—¶ï¼Œåœ¨ Java ç¼–è¯‘åï¼Œ`IndexSearch<Tag>` å’Œ `IndexSearch<User>` åœ¨ JVM è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰éƒ½ä¼šå˜æˆåŸå§‹çš„ `IndexSearch`ã€‚JVM æ ¹æœ¬ä¸çŸ¥é“è¿™ä¸ªå¯¹è±¡åŸæœ¬æ˜¯ `<Tag>` è¿˜æ˜¯ `<User>`ã€‚
å› æ­¤æ— æ³•ç”¨ `instanceof` åˆ¤æ–­ï¼Œå¦‚æœéœ€è¦åˆ¤æ–­è¿è¡Œæ—¶å…·ä½“çš„ç±»å‹ï¼Œéœ€è¦åœ¨ç±»ä¸­ä¿ç•™ä¸€ä¸ªå­—æ®µ `Class<K>`
åœ¨ Java ä¸­å¤„ç†æ··åˆæ³›å‹é›†åˆï¼ˆHeterogeneous Containerï¼‰æ—¶ï¼š å£°æ˜ `List` æ—¶ï¼šå°½é‡ä½¿ç”¨ `List<IndexSearch<?>>` è€Œä¸æ˜¯åŸç”Ÿç±»å‹ `List<IndexSearch>`ï¼Œè™½ç„¶ä¸¤è€…éƒ½èƒ½è·‘ï¼Œä½†å‰è€…åœ¨è¯­ä¹‰ä¸Šæ›´æ˜ç¡®

**æ³›å‹é€šé…ç¬¦**ï¼š
`<?>` æ— ç•Œé€šé…ç¬¦ï¼šè¡¨ç¤ºâ€œä»»æ„ç±»å‹â€ã€‚é€šå¸¸ç”¨äºåªè¯»æ“ä½œï¼Œæˆ–è€…åªå…³å¿ƒé›†åˆå¤§å°ä¸å…³å¿ƒå†…å®¹çš„åœºæ™¯ã€‚
`<? extends T>` ä¸Šç•Œé€šé…ç¬¦ (Upper Bound)ï¼šè¡¨ç¤º `T` æˆ– `T` çš„å­ç±»ã€‚
`<? super T>` ä¸‹ç•Œé€šé…ç¬¦ (Lower Bound)ï¼šè¡¨ç¤º `T` æˆ– `T` çš„çˆ¶ç±»ã€‚

**æ ¸å¿ƒåŸåˆ™**ï¼šPECS (Producer Extends, Consumer Super)
Producer Extends (å¦‚æœä½ è¦ä»é›†åˆä¸­â€œè¯»å–â€æ•°æ®)ï¼š
ä½¿ç”¨ `<? extends T>`ã€‚
å› ä¸ºä½ å–å‡ºæ¥çš„å¯¹è±¡è‚¯å®šæ˜¯ `T` (æˆ– `T` çš„å­ç±»)ï¼Œæ‰€ä»¥ç”¨ `T` æ¥æ”¶æ˜¯å®‰å…¨çš„ã€‚
å‰¯ä½œç”¨ï¼šä¸èƒ½å¾€é‡Œå­˜ä¸œè¥¿ï¼ˆé™¤äº† `null`ï¼‰ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“é‡Œé¢å…·ä½“æ˜¯ `T` çš„å“ªä¸ªå­ç±»ã€‚
Consumer Super (å¦‚æœä½ è¦å¾€é›†åˆé‡Œâ€œå†™å…¥â€æ•°æ®)ï¼š
ä½¿ç”¨ `<? super T>`ã€‚
å› ä¸ºè¿™ä¸ªé›†åˆè‡³å°‘æ˜¯è£… `T` çš„çˆ¶ç±»çš„ï¼Œæ‰€ä»¥ä½ å¾€é‡Œä¸¢ `T` (æˆ– `T` çš„å­ç±») æ˜¯ç»å¯¹å®‰å…¨çš„ã€‚


### 7. Java æ¥å£æˆå‘˜
Java ä¸­ï¼Œæ¥å£å¯ä»¥å®šä¹‰æˆå‘˜ï¼Œä½†å¿…é¡»æ˜¯ `public static final`ï¼Œä½œç”¨æ˜¯å…¨ç³»ç»Ÿå…±ç”¨çš„å¸¸é‡

### 8. æŠ½è±¡ç±»çš„æ„é€ å‡½æ•°
Java ä¸­ï¼ŒæŠ½è±¡ç±»æœ‰æ„é€ å‡½æ•°ï¼Œæ˜¯ç”¨æ¥åˆå§‹åŒ– `parent class` çš„ã€‚è€Œç»§æ‰¿äº† `parent class` çš„ `child` åœ¨åˆå§‹åŒ–æ—¶éœ€è¦æ˜¾å¼æˆ–éšå¼åœ°è°ƒç”¨ `parent class constructor`ã€‚
å¦‚æœ `parent` åªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ`child class` ä¼šé»˜è®¤è°ƒç”¨ï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œåˆ™éœ€è¦æ˜¾ç¤ºè°ƒç”¨ `super(...)`ã€‚
Javaä¸­ `child class` çš„åˆå§‹åŒ–æ–¹å¼å¦‚ä¸‹ï¼š
JVMè°ƒç”¨ `child class constructor` æ—¶ä¼šå…ˆè°ƒç”¨ `parent class` çš„ `super`ï¼Œå®Œæˆå¯¹æŠ½è±¡ç±»ä¸­æˆå‘˜çš„åˆå§‹èƒ¡ï¼Œæ‰§è¡Œåå†ç»§ç»­ `child constructor`

### 9. Java ä¸­çº¿ç¨‹å®‰å…¨çš„é›†åˆï¼ˆJUCï¼‰
- Map: `ConcurrentHashMap`
- List: `CopyOnWriteArrayList`
- Set: `CopyOnWriteArraySet`, `ConcurrentHashMap.newKeySet`